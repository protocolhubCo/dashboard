<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        overflow: hidden;
      }

      canvas {
        max-width: 100%;
        height: auto; /* Ensures it scales proportionally */
      }
    </style>
  </head>
  <body>
    <canvas id="stackedBarChart"></canvas>
    <script>
      const ctx = document.getElementById('stackedBarChart').getContext('2d');

      // Data structure for stacked bars
      const data = {
        labels: ['User', 'Friend1', 'Friend2'], // Column labels
        datasets: [
          {
            label: 'Completed',
            data: [24, 16, 32], // Completed percentages relative to 100% protocols
            backgroundColor: 'rgba(75, 192, 192, 0.8)', // Teal color
          },
          {
            label: 'Remaining (Chosen)',
            data: [36, 24, 48], // Remaining chosen percentages relative to 100%
            backgroundColor: 'rgba(200, 200, 200, 0.8)', // Light grey color
            borderRadius: {
              topLeft: 10,
              topRight: 10, // Round the top-left and top-right corners
              bottomLeft: 0,
              bottomRight: 0, // Keep bottom corners sharp
            },
          },
        ],
      };

      // Configuration options for stacked bar chart
      const options = {
        responsive: true,
        maintainAspectRatio: false, // Ensures the chart adjusts to fit the WebView container
        plugins: {
          legend: {
            display: true, // Show the legend
          },
          title: {
            display: false, // Removes the title heading
          },
        },
        scales: {
          x: {
            stacked: true, // Stack the bars
            grid: {
              display: false, // Hide grid lines
            },
            ticks: {
              display: true, // Show X-axis labels (User, Friend1, Friend2)
            },
          },
          y: {
            stacked: true, // Stack the bars
            beginAtZero: true,
            max: 100, // Sets the maximum Y-axis value to 100
            grid: {
              display: true, // Show grid lines for better readability
            },
            ticks: {
              display: true, // Show Y-axis percentage points
              callback: function (value) {
                return value + '%'; // Add percentage symbol to Y-axis ticks
              },
            },
          },
        },
      };

      // Render the chart
      new Chart(ctx, {
        type: 'bar',
        data: data,
        options: options,
      });
    </script>
  </body>
</html>
